Скажу честно, первой я планировал опубликовать совсем другую задачу, совсем другой сложности. Но так получилось, что по работе мне потребовалось переработать одну из задач, которую вполне можно опубликовать (все равно результат переработки будет распространяться среди широкого круга лиц).
Итак, задача.
Тип задачи: утилита.
Название: sql-diff.
Назначение: приведение структуры базы данных в требуемое (эталонное) состояние.
Предистория:
Данная задача уже реализована мною в рамках более сложной системы, которую я пока не готов опубликовать.
В той реализации описание требуемой (эталонной) структуры представлено не в виде SQL, так что потребуется не просто выделить нужный код, но и доработать его.
Обоснование:
* Существует некий программный комплекс, содержащий в своем составе некую базу данных (БД).
* Данный комплекс активно развивается, в том числе меняется структура БД.
* Существует большое количество инсталляций данного комплекса.
* Обновление каждой конкретной инсталляции может производиться нерегулярно.
* Ручное формирование скриптов обновления структуры БД, необходимых при обновлении инсталляции, очень трудозотратно.
* Отследить состав необходимых для применения на каждой конкретной инсталляции скриптов, еще муторнее, хоть отдельного человека сажай.
Итак, требуется скрипт, на вход которого подается эталонная и текущая структуры БД. На выходе мы должны получить скрипт SQL для приведения текущей структуры БД к эталонной.

